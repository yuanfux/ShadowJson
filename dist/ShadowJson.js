module.exports=function(){function t(t,i){if(this._o=t,this._s={},i)for(var s=0;s<i.length;s++){var e=this._f(t,i[s]);void 0!==e&&(this._s[i[s]]=this._dc(e))}}return t.prototype._pv=function(t){return!(null==t||""===t)},t.prototype._dc=function(t){return void 0!==t?JSON.parse(JSON.stringify(t)):void 0},t.prototype._f=function(t,i){i=this._pv(i)?i.split("."):i;for(var s=0;t&&s<i.length;s++)t=t[i[s]];return t},t.prototype._e=function(t,i,s){if(!this._pv(i))return!1;for(var e=(i=i.split(".")).length,o=0;o<e;o++){if(o===e-1)return void 0!==s?t[i[o]]=this._dc(s):delete t[i[o]],!0;if(null==t[i[o]]){if(void 0===s)return!1;t[i[o]]={}}t=t[i[o]]}},t.prototype.get=function(t){return this._pv(t)?this._s[t]:this._s},t.prototype.set=function(t,i){this._pv(t)&&(this._s[t]=this._dc(i))},t.prototype.commit=function(t){if(this._pv(t))this._s.hasOwnProperty(t)&&(this._e(this._o,t,this._s[t]),delete this._s[t]);else for(var i=0,s=Object.keys(this._s);i<s.length;i+=1){var e=s[i];this._e(this._o,e,this._s[e]),delete this._s[e]}},t.prototype.discard=function(t){if(this._pv(t))this._s.hasOwnProperty(t)&&delete this._s[t];else for(var i=0,s=Object.keys(this._s);i<s.length;i+=1){delete this._s[s[i]]}},t}();
